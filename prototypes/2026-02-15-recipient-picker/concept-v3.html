<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Option B: Group Cards with Inline Override</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap" rel="stylesheet">
  <style>
    :root {
      --surface-primary: 0 0% 100%;
      --surface-secondary: 0 0% 98%;
      --surface-tertiary: 0 0% 96%;
      --surface-inverse: 0 0% 9%;
      --text-primary: 0 0% 9%;
      --text-secondary: 0 0% 45%;
      --text-tertiary: 0 0% 64%;
      --text-inverse: 0 0% 98%;
      --border-default: 0 0% 90%;
      --border-subtle: 0 0% 94%;
      --border-strong: 0 0% 80%;
      --status-success: 142 71% 45%;
      --status-success-bg: 142 76% 94%;
      --status-error: 0 84% 60%;
      --status-error-bg: 0 86% 97%;
      --status-warning: 38 92% 50%;
      --status-warning-bg: 48 96% 95%;
      --radius: 0.5rem;
    }
    * { border-color: hsl(var(--border-default)); }
    body {
      font-family: 'Satoshi', system-ui, -apple-system, sans-serif;
      background-color: hsl(0 0% 50% / 0.3);
      color: hsl(var(--text-primary));
      -webkit-font-smoothing: antialiased;
    }
    @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
    .slideout { animation: slideIn 0.25s ease-out; }

    .av-blue { background: #DBEAFE; color: #1E40AF; }
    .av-emerald { background: #D1FAE5; color: #065F46; }
    .av-amber { background: #FEF3C7; color: #92400E; }
    .av-violet { background: #EDE9FE; color: #5B21B6; }
    .av-rose { background: #FFE4E6; color: #9F1239; }
    .av-cyan { background: #CFFAFE; color: #155E75; }
    .av-teal { background: #CCFBF1; color: #134E4A; }

    /* Group card */
    .group-card {
      border: 1.5px solid hsl(var(--border-default)); border-radius: 8px;
      overflow: hidden; transition: all 150ms;
    }
    .group-card:hover { border-color: hsl(var(--border-strong)); }
    .group-card.selected { border-color: hsl(var(--surface-inverse)); }

    .group-header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 14px; cursor: pointer; transition: background 140ms;
    }
    .group-header:hover { background: hsl(var(--surface-secondary)); }
    .group-card.selected .group-header { background: hsl(var(--surface-secondary)); }

    .toggle {
      width: 36px; height: 20px; border-radius: 999px; padding: 2px;
      background: hsl(var(--surface-tertiary)); transition: background 200ms; cursor: pointer;
      position: relative; flex-shrink: 0;
    }
    .toggle.on { background: hsl(var(--surface-inverse)); }
    .toggle::after {
      content: ''; position: absolute; top: 2px; left: 2px;
      width: 16px; height: 16px; border-radius: 999px;
      background: white; box-shadow: 0 1px 2px rgba(0,0,0,0.15);
      transition: transform 200ms;
    }
    .toggle.on::after { transform: translateX(16px); }

    .group-body {
      border-top: 1px solid hsl(var(--border-subtle));
      padding: 4px; display: none;
    }
    .group-card.expanded .group-body { display: block; }

    .flat-row { border-radius: 4px; transition: background-color 140ms ease-out; }
    .flat-row:hover { background-color: hsl(var(--surface-secondary)); }

    .nda-badge { display: inline-flex; align-items: center; gap: 3px; padding: 1px 6px; border-radius: 4px; font-size: 10px; font-weight: 500; background: hsl(var(--status-warning-bg)); color: hsl(var(--status-warning)); }
    .sent-badge { display: inline-flex; align-items: center; gap: 3px; border-radius: 999px; background: hsl(var(--status-success-bg)); padding: 1px 6px; font-size: 10px; font-weight: 500; color: hsl(var(--status-success)); }

    /* Avatar stack */
    .avatar-stack { display: flex; }
    .avatar-stack > * { margin-left: -6px; border: 2px solid white; }
    .avatar-stack > *:first-child { margin-left: 0; }
  </style>
  <script>
    tailwind.config = { theme: { extend: { colors: {
      'surface-primary': 'hsl(var(--surface-primary))', 'surface-secondary': 'hsl(var(--surface-secondary))',
      'surface-tertiary': 'hsl(var(--surface-tertiary))', 'surface-inverse': 'hsl(var(--surface-inverse))',
      'text-primary': 'hsl(var(--text-primary))', 'text-secondary': 'hsl(var(--text-secondary))',
      'text-tertiary': 'hsl(var(--text-tertiary))', 'border-default': 'hsl(var(--border-default))',
    }, borderRadius: { lg: 'var(--radius)', md: 'calc(var(--radius) - 2px)', sm: 'calc(var(--radius) - 4px)' } } } }
  </script>
</head>
<body class="min-h-screen flex items-start justify-end">
  <div class="slideout w-[440px] min-h-screen bg-surface-primary border-l shadow-xl flex flex-col">

    <!-- Header -->
    <div class="flex items-center justify-between px-6 py-4 border-b">
      <div>
        <h2 class="text-base font-semibold">Select Recipients</h2>
        <p class="text-xs text-text-tertiary mt-0.5">Toggle groups or expand to pick individuals</p>
      </div>
      <button class="w-8 h-8 flex items-center justify-center rounded-md hover:bg-surface-secondary transition-colors">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      </button>
    </div>

    <!-- Quick actions bar -->
    <div class="px-5 py-3 border-b flex items-center justify-between">
      <button class="text-xs font-medium px-3 py-1.5 rounded-full border hover:bg-surface-secondary transition-colors">Select all (9)</button>
      <div class="flex items-center gap-3">
        <span class="text-xs text-text-tertiary tabular-nums">4 of 9 selected</span>
        <button class="text-xs font-medium text-text-secondary hover:text-text-primary transition-colors">Clear</button>
      </div>
    </div>

    <!-- Scrollable content -->
    <div class="flex-1 overflow-y-auto p-4 space-y-3">

      <!-- Angels card - selected, expanded -->
      <div class="group-card selected expanded">
        <div class="group-header">
          <div class="flex items-center gap-3">
            <div class="flex items-center gap-2">
              <div class="avatar-stack">
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-blue">MA</div>
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-emerald">RB</div>
                <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-violet">JS</div>
              </div>
            </div>
            <div>
              <p class="text-sm font-medium">Angels</p>
              <p class="text-xs text-text-tertiary">3 contacts</p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <button class="text-xs text-text-tertiary hover:text-text-primary">
              <svg width="14" height="14" viewBox="0 0 12 12"><path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
            </button>
            <div class="toggle on"></div>
          </div>
        </div>
        <div class="group-body">
          <button class="flat-row w-full flex items-center gap-3 px-3 py-2 text-left" style="background:hsl(var(--surface-secondary))">
            <div class="w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold av-blue">MA</div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium truncate">Marc Andreessen</p>
              <p class="text-xs text-text-tertiary truncate">marc@a16z.com</p>
            </div>
            <svg width="14" height="14" viewBox="0 0 256 256" fill="hsl(var(--status-success))"><path d="M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"/></svg>
          </button>
          <button class="flat-row w-full flex items-center gap-3 px-3 py-2 text-left" style="background:hsl(var(--surface-secondary))">
            <div class="w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold av-emerald">RB</div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium truncate">Roelof Botha</p>
              <p class="text-xs text-text-tertiary truncate">roelof@sequoia.com</p>
            </div>
            <svg width="14" height="14" viewBox="0 0 256 256" fill="hsl(var(--status-success))"><path d="M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"/></svg>
          </button>
          <button class="flat-row w-full flex items-center gap-3 px-3 py-2 text-left" style="background:hsl(var(--surface-secondary))">
            <div class="w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold av-violet">JS</div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium truncate">James Schuyler</p>
              <p class="text-xs text-text-tertiary truncate">james@schuyler.org</p>
            </div>
            <svg width="14" height="14" viewBox="0 0 256 256" fill="hsl(var(--status-success))"><path d="M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"/></svg>
          </button>
        </div>
      </div>

      <!-- Lead Investors card - partially selected, collapsed -->
      <div class="group-card selected">
        <div class="group-header">
          <div class="flex items-center gap-3">
            <div class="avatar-stack">
              <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-amber">PG</div>
              <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-rose">SA</div>
            </div>
            <div>
              <p class="text-sm font-medium">Lead Investors</p>
              <p class="text-xs text-text-tertiary">1 of 2 selected</p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <span class="nda-badge">
              <svg width="10" height="10" viewBox="0 0 256 256" fill="currentColor"><path d="M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"/></svg>
              1 no NDA
            </span>
            <button class="text-xs text-text-tertiary hover:text-text-primary">
              <svg width="14" height="14" viewBox="0 0 12 12"><path d="M4.5 3L7.5 6L4.5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
            </button>
            <div class="toggle on"></div>
          </div>
        </div>
      </div>

      <!-- VCs card - not selected -->
      <div class="group-card">
        <div class="group-header">
          <div class="flex items-center gap-3">
            <div class="avatar-stack">
              <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-cyan">BH</div>
              <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-teal">MZ</div>
              <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold bg-surface-tertiary text-text-tertiary">+1</div>
            </div>
            <div>
              <p class="text-sm font-medium">Venture Capital</p>
              <p class="text-xs text-text-tertiary">3 contacts</p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <span class="nda-badge">
              <svg width="10" height="10" viewBox="0 0 256 256" fill="currentColor"><path d="M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"/></svg>
              1 no NDA
            </span>
            <button class="text-xs text-text-tertiary hover:text-text-primary">
              <svg width="14" height="14" viewBox="0 0 12 12"><path d="M4.5 3L7.5 6L4.5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
            </button>
            <div class="toggle"></div>
          </div>
        </div>
      </div>

      <!-- Advisors card - not selected -->
      <div class="group-card">
        <div class="group-header">
          <div class="flex items-center gap-3">
            <div class="avatar-stack">
              <div class="w-6 h-6 rounded-full flex items-center justify-center text-[8px] font-bold av-teal">RH</div>
            </div>
            <div>
              <p class="text-sm font-medium">Advisors</p>
              <p class="text-xs text-text-tertiary">1 contact</p>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <button class="text-xs text-text-tertiary hover:text-text-primary">
              <svg width="14" height="14" viewBox="0 0 12 12"><path d="M4.5 3L7.5 6L4.5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
            </button>
            <div class="toggle"></div>
          </div>
        </div>
      </div>

      <!-- Previously sent divider -->
      <div class="flex items-center gap-3 py-1">
        <div class="flex-1 border-t"></div>
        <span class="text-[11px] text-text-tertiary font-medium">Previously sent</span>
        <div class="flex-1 border-t"></div>
      </div>

      <!-- Already-sent contact (standalone) -->
      <div class="flex items-center gap-3 px-3 py-2 rounded-md opacity-50">
        <div class="w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold av-teal">VK</div>
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium truncate">Vinod Khosla</p>
          <p class="text-xs text-text-tertiary truncate">vinod@khoslaventures.com</p>
        </div>
        <span class="sent-badge">
          <svg width="10" height="10" viewBox="0 0 256 256" fill="currentColor"><path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"/></svg>
          Sent Feb 10
        </span>
      </div>

      <!-- Add external -->
      <button class="w-full flex items-center gap-2 rounded-md border border-dashed px-3 py-2.5 text-sm text-text-secondary hover:border-border-strong hover:bg-surface-secondary transition-colors">
        <svg width="14" height="14" viewBox="0 0 256 256" fill="currentColor"><path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/></svg>
        Add external recipient
      </button>
    </div>

    <!-- Footer -->
    <div class="border-t px-5 py-3">
      <div class="flex gap-2">
        <button class="flex-1 py-2 px-4 rounded-full border text-sm font-medium text-text-secondary hover:bg-surface-secondary transition-colors">Back</button>
        <button class="flex-1 py-2 px-4 rounded-full text-sm font-medium text-white" style="background:hsl(var(--surface-inverse))">Continue with 4</button>
      </div>
    </div>
  </div>

  <!-- Annotation -->
  <div class="fixed bottom-4 left-4 max-w-md p-4 rounded-lg bg-white border shadow-lg text-sm space-y-2">
    <p class="font-bold text-base">Option B: Group Toggle Cards</p>
    <p class="text-text-secondary">Groups as first-class cards with toggle switches. Toggle ON = select all in group. Expand to see/override individuals. Avatar stacks preview who's in each group. NDA warnings surface at group level. Previously-sent contacts separated at bottom.</p>
    <div class="text-xs text-text-tertiary space-y-1">
      <p><strong>Strength:</strong> Visual, scannable, group-level NDA awareness. Toggle is fast for batch ops.</p>
      <p><strong>Weakness:</strong> More vertical space. Toggle + expand is two distinct interactions to learn.</p>
    </div>
  </div>
</body>
</html>